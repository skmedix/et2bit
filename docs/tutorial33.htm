<html>
<head>
<title>2Bit Enemy Territory</title>
<link href="styles.css" rel="stylesheet" type="text/css">
</head>

<body>
<table width="100%"  border="0" cellpadding="0" cellspacing="0" bgcolor="#525C69">
  <tr>
    <td width="1"><a href="/" target="_blank"><img src="images/url.gif" alt="2Bit's Mapping Corner on www.PythonOnline.co.uk" hspace="36" vspace="5" border="0" width="166" height="15"></a></td>
    <td width="1"><img src="images/s.gif" width="36" height="1"></td>
  </tr>
</table>
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
	<td>
		<table width="100%"  border="0" cellspacing="0" cellpadding="0">
		<tr>
			<td valign="top">
				<table width="100%"  border="0" align="center" cellpadding="0" cellspacing="0">
				<tr class=grey>
					<td>
						<table width="100%" border="0" cellpadding="0" cellspacing="0">
						<tr>
							<td><img src="images/logo.jpg" hspace="6" width="227" height="250"></td>
							<td width="100%" align="center"><font size="6">ET Mapping Tutorial</font><p><font size="5">Lesson
                              33</font></p></td>
						</tr>
						</table>
					</td>
				</tr>
				<tr>
					<td>
						<table width="100%"  border="0" cellspacing="0" cellpadding="8">
						<tr>
							<td>
								<table width="100%"  border="0" cellpadding="5" cellspacing="2" class="nicefield">
								<tr valign="top">
									<td width="100%" class=header>Topics</td>
								</tr> 
								<tr valign="top">
									<td width="100%" bgcolor="#EAEBED">
<b><br>
Making the game end<br>
&nbsp;</b>
<table border="0" cellpadding="2" cellspacing="0" bordercolor="#FFFFFF">
  <tr>
    <td></td>
    <td><a href="#end">Making the game end</a></td>
  </tr>
  <tr>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td></td>
    <td><a href="tutorial.htm">Back to main menu</a></td>
  </tr>
</table>
									</td>
								</tr>
								</table>
							</td>
						</tr>
						</table>
<!-- Alert boxout
<table border="0" cellpadding="5" cellspacing="0" bordercolor="#000000">
<tr>
	<td bordercolor="#000000" style="border-style: solid; border-width: 1" valign="top" bgcolor="#F4F4F4">
	<img border="0" src="images/tutorial/alert.gif" width="48" height="42" style="float: left">
	</td>
</tr>
</table>
-->
<!--
						<table width="100%"  border="0" cellspacing="0" cellpadding="8">
						<tr>
							<td>
								<table width="100%"  border="0" cellpadding="5" cellspacing="2" class="nicefield">
								<tr valign="top">
									<td width="100%">
                                      <table border="0" cellpadding="0" cellspacing="0" width="100%">
                                        <tr>
                                          <td width="50%" class=header><a name="name">name</a></td>
                                          <td width="50%" align="right"><a href="#">[Top]</a></td>
                                        </tr>
                                      </table>
                                    </td>
								</tr> 
								<tr valign="top">
									<td width="100%" bgcolor="#EAEBED">
									</td>
								</tr>
								</table>
							</td>
						</tr>
						</table>
-->

						<table width="100%"  border="0" cellspacing="0" cellpadding="8">
						<tr>
							<td>
								<table width="100%"  border="0" cellpadding="5" cellspacing="2" class="nicefield">
								<tr valign="top">
									<td width="100%">
                                      <table border="0" cellpadding="0" cellspacing="0" width="100%">
                                        <tr>
                                          <td width="50%" class=header><a name="end">Making the game end</a></td>
                                          <td width="50%" align="right"><a href="#">[Top]</a></td>
                                        </tr>
                                      </table>
                                    </td>
								</tr> 
								<tr valign="top">
									<td width="100%" bgcolor="#EAEBED">
                                    The map will end when a winning team has
                                    been specified in the script, and the game
                                    ending conditions have been met.
                                    <p>The instruction <b>wm_setwinner</b> is
                                    used to specify the winning team:</p>
                                    <ul>
                                      <li>-1 = No winning team specified yet</li>
                                      <li>0 = Axis win</li>
                                      <li>1 = Allies win</li>
                                    </ul>
                                    <p>In the tutorial script, we have set
                                    wm_setwinner to 0 right at the start, so
                                    that if the game time expires, Axis will
                                    win.</p>
                                    <p>What we will do is add some script to
                                    make the allies win if they blow the gate.</p>
                                    <p>Open the tutorial.script file, and add
                                    this line at the end of the <b>gate</b> <b>death</b>
                                    trigger:</p>
                                    <ul>
                                      <li>trigger game_manager allies_win</li>
                                    </ul>
                                    <p>So when the gate is blown up, the last
                                    thing the death trigger does is call
                                    (execute) the <b>allies_win</b> trigger in
                                    the <b>game_manager</b> procedure.</p>
                                    <p>Add this script after the closing
                                    &quot;}&quot; of the spawn trigger in the
                                    game_manager procedure, but before the
                                    closing &quot;}&quot; of the game_manager
                                    itself.:</p>
                                    <table border="0" cellpadding="4" cellspacing="0" bgcolor="#FFFFFF">
                                      <tr>
                                        <td><font SIZE="2">trigger allies_win</font></td>
                                        <td>&nbsp;</td>
                                      </tr>
                                      <tr>
                                        <td><font SIZE="2">{</font></td>
                                        <td>&nbsp;</td>
                                      </tr>
                                      <tr>
                                        <td>&nbsp;</td>
                                        <td><font SIZE="2">wm_announce &quot;The
                                          Allies blew up the gate!&quot;
                                          <p>wm_setwinner 1</p>
                                          <p>wait 3000</p>
                                          <p>wm_endround</font></td>
                                      </tr>
                                      <tr>
                                        <td><font SIZE="2">}</font></td>
                                        <td>&nbsp;</td>
                                      </tr>
                                    </table>
									</td>
								</tr>
								<tr valign="top">
									<td width="100%" bgcolor="#EAEBED">
                                    So if the allies succeed, an announcement is
                                    made, wm_setwinner is changed to 1, a 3
                                    second delay to give people time to see it,
                                    and then the <b>wm_endround</b> instruction
                                    is executed, which forces the game to end
                                    now.
                                    <p>As you can see, there is no provision for
                                    a draw:&nbsp; wm_setwinner is either 0 or 1
                                    when the game ends.&nbsp; If the timer
                                    expires and wm_setwinner is -1, then the
                                    game continues until you set it to 0 or 1,
                                    at which time the game immediately ends.
									</td>
								</tr>
								<tr valign="top">
									<td width="100%" bgcolor="#EAEBED">
                                    <a href="tutorial34.htm">
                                    Next lesson</a>
									</td>
								</tr>
								</table>
							</td>
						</tr>
						</table>

					</td>
				</tr>
				</table>          
			</td>
		</tr>
		</table>
	</td>
</tr>
</table>
</body>
</html>